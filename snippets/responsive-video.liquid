

{% assign video_aspect_ratio = aspect_ratio | default: "0.9" %}
{% assign min = 100 %}
{% assign max = 10000 %}
{% assign diff = max | minus: min %}
{% assign generated_video_id = "now" | date: "%N" | modulo: diff | plus: min %}

<style>
  #VideoWrapper-{{ generated_video_id }} {
    position: relative;
    width: 100%;
    max-width: {{ max_width | default: '720' }}px;
    padding-top: {{ 100 | divided_by: video_aspect_ratio }}%;
    overflow: hidden;
  }

  #Video-{{ generated_video_id }} ,  video{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
  }

  {% if crop == true %}
    #VideoWrapper-{{ generated_video_id }} video {
      object-fit: cover;
    }
  {% endif %}

  {% if fill == true %} 
    #VideoWrapper-{{ generated_video_id }} video{
      object-fit: fill;
    }
  {% endif %}

  {% if background == true %} 
    #VideoWrapper-{{ generated_video_id }} video{
      background-color:#fff;
    }
  {% endif %}


  {% if contain == true %} 
    #VideoWrapper-{{ generated_video_id }} video{
      object-fit: contain;
    }
  {% endif %}
  
</style>

{% if video_url %}
    <div id="VideoWrapper-{{ generated_video_id }}" >
        <iframe
          id="Video-{{ generated_video_id }}"
          src="{{ video_url | replace: 'watch?v=', 'embed/' }}?autoplay=1"
          allow="autoplay; encrypted-media"
          allowfullscreen
          {% if no_lazyload == false %} loading="lazy" {% endif %}
        ></iframe>
    </div>

{% else %}
    <div id="VideoWrapper-{{ generated_video_id }}" >
       {{ video | video_tag: autoplay: true, loop: true, muted: true }}
    </div>
{% endif %}
